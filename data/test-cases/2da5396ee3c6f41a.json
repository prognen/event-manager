{"uid":"2da5396ee3c6f41a","name":"test_full_event_management_scenario","fullName":"tests.e2e.test_mvp_event_flow_e2e.TestMVPEventManagementFlow#test_full_event_management_scenario","historyId":"e62c3c00690e83a3154aef7fb23391f5","time":{"start":1772147831318,"stop":1772147832220,"duration":902},"status":"failed","statusMessage":"AssertionError: Ошибка создания сессии (HTTP 400): {\"detail\":\"Программа между площадками 1 и 2 не найдена\"}\nassert 400 == 200\n +  where 400 = <Response [400 Bad Request]>.status_code","statusTrace":"tests/e2e/test_mvp_event_flow_e2e.py:137: in test_full_event_management_scenario\n    assert session_resp.status_code == 200, (\nE   AssertionError: Ошибка создания сессии (HTTP 400): {\"detail\":\"Программа между площадками 1 и 2 не найдена\"}\nE   assert 400 == 200\nE    +  where 400 = <Response [400 Bad Request]>.status_code","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1772147824926,"stop":1772147824997,"duration":71},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1772147824998,"stop":1772147824998,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1772147824998,"stop":1772147824998,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1772147824998,"stop":1772147824998,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1772147824998,"stop":1772147824998,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop_policy","time":{"start":1772147824998,"stop":1772147824998,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1772147826958,"stop":1772147826960,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"faker_seed","time":{"start":1772147831317,"stop":1772147831317,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Ошибка создания сессии (HTTP 400): {\"detail\":\"Программа между площадками 1 и 2 не найдена\"}\nassert 400 == 200\n +  where 400 = <Response [400 Bad Request]>.status_code","statusTrace":"tests/e2e/test_mvp_event_flow_e2e.py:137: in test_full_event_management_scenario\n    assert session_resp.status_code == 200, (\nE   AssertionError: Ошибка создания сессии (HTTP 400): {\"detail\":\"Программа между площадками 1 и 2 не найдена\"}\nE   assert 400 == 200\nE    +  where 400 = <Response [400 Bad Request]>.status_code","steps":[{"name":"Шаг 1: Регистрация нового пользователя","time":{"start":1772147831340,"stop":1772147831637,"duration":297},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Шаг 2: Аутентификация (прямой вход /api/login)","time":{"start":1772147831637,"stop":1772147831932,"duration":295},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверка токена после входа","time":{"start":1772147831932,"stop":1772147831932,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Шаг 3: Просмотр доступных площадок","time":{"start":1772147831932,"stop":1772147831937,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверка наличия площадок в системе","time":{"start":1772147831937,"stop":1772147831937,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Шаг 4: Просмотр активностей на площадках","time":{"start":1772147831937,"stop":1772147832004,"duration":67},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверка наличия активностей","time":{"start":1772147832004,"stop":1772147832004,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Шаг 5: Просмотр вариантов размещения","time":{"start":1772147832004,"stop":1772147832060,"duration":56},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверка наличия размещений","time":{"start":1772147832060,"stop":1772147832060,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Шаг 6: Просмотр доступных маршрутов (программ)","time":{"start":1772147832060,"stop":1772147832102,"duration":42},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверка наличия маршрутов","time":{"start":1772147832102,"stop":1772147832103,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Шаг 7: Создание мероприятия с маршрутом Москва → Воронеж","time":{"start":1772147832103,"stop":1772147832187,"duration":84},"status":"failed","statusMessage":"AssertionError: Ошибка создания сессии (HTTP 400): {\"detail\":\"Программа между площадками 1 и 2 не найдена\"}\nassert 400 == 200\n +  where 400 = <Response [400 Bad Request]>.status_code\n","statusTrace":"  File \"/home/runner/work/event-manager/event-manager/tests/e2e/test_mvp_event_flow_e2e.py\", line 137, in test_full_event_management_scenario\n    assert session_resp.status_code == 200, (\n    ...<2 lines>...\n    )\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Очистка: удаление тестового пользователя","time":{"start":1772147832188,"stop":1772147832220,"duration":32},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[{"name":"log","type":"text/plain","size":0},{"name":"stdout","type":"text/plain","size":0}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":13,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"event_loop::finalizer","time":{"start":1772147832300,"stop":1772147832300,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1772147832300,"stop":1772147832300,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_restore_policy","time":{"start":1772147832300,"stop":1772147832300,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1772147832300,"stop":1772147832301,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"feature","value":"MVP: Управление мероприятиями"},{"name":"story","value":"Полный MVP-сценарий: регистрация → вход → создание мероприятия → просмотр"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.e2e"},{"name":"suite","value":"test_mvp_event_flow_e2e"},{"name":"subSuite","value":"TestMVPEventManagementFlow"},{"name":"host","value":"runnervmnay03"},{"name":"thread","value":"3295-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.e2e.test_mvp_event_flow_e2e"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":3,"broken":0,"skipped":0,"passed":0,"unknown":0,"total":3},"items":[{"uid":"fdd0c8d29e20ab2d","status":"failed","statusDetails":"AssertionError: Активность 'Конференция' не найдена\nassert 'Конференция' in '\\ufeff<!DOCTYPE html>\\n<html lang=\"ru\">\\n<head>\\n  <meta charset=\"UTF-8\">\\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\\n  <title>Активности</title>\\n  <link href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" rel=\"stylesheet\">\\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css\">\\n  <style>\\n    header, main, footer {\\n      padding-left: 240px;\\n    }\\n\\n    body {\\n      background: white;\\n    }\\n\\n    @media only screen and (max-width: 992px) {\\n      header, main, footer {\\n        padding-left: 0;\\n      }\\n    }\\n    header {\\n      position: fixed; /* Шапка фиксирована вверху */\\n      width: 100%;\\n      top: 0;\\n      left: 0;\\n      z-index: 1; /* Чтобы шапка всегда была сверху */\\n    }\\n    .sidenav {\\n      position: fixed; /* Боковая панель фиксирована */\\n      left: 0;\\n      width: 240px;\\n      height: 100%;\\n    }\\n\\n    .fab-tip {\\n      position: fixed;\\n      right: 85px;\\n      padding: 0px 0.5rem;\\n      text-align: right;\\n      background-color: #323232;\\n      border-radius: 2px;\\n      color: #FFF;\\n      width: auto;\\n    }\\n\\n    img {\\n      positi...    address: activityAddress,\\n            activity_time: activityEventTime,\\n            city: activityCity\\n        };\\n\\n        // Отправляем данные для обновления\\n        $.ajax({\\n            url: `/api/entertainments/${currentActivityId}`,\\n            type: \\'PUT\\',  // Метод запроса для обновления\\n            contentType: \\'application/json\\',\\n            data: JSON.stringify(requestData),\\n            success: function (response) {\\n                $(\\'#editModal\\').modal(\\'close\\');\\n                alert(\\'Активность обновлено успешно.\\');\\n                location.reload(); // Перезагружаем страницу после обновления\\n            },\\n            error: function (error) {\\n                console.error(\\'Ошибка при обновлении:\\', error);\\n                alert(\\'Ошибка при обновлении Активности.\\');\\n            }\\n        });\\n    });\\n    \\n    $(\\'#logoutLink\\').on(\\'click\\', function () {\\n      localStorage.removeItem(\\'auth_token\\'); \\n      localStorage.removeItem(\\'user_id\\');\\n      sessionStorage.removeItem(\\'auth_token\\');\\n      sessionStorage.removeItem(\\'user_id\\');\\n\\n      window.location.replace(\\'/\\');\\n    });\\n  });\\n</script>\\n\\n</body>\\n</html>'\n +  where '\\ufeff<!DOCTYPE html>\\n<html lang=\"ru\">\\n<head>\\n  <meta charset=\"UTF-8\">\\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\\n  <title>Активности</title>\\n  <link href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" rel=\"stylesheet\">\\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css\">\\n  <style>\\n    header, main, footer {\\n      padding-left: 240px;\\n    }\\n\\n    body {\\n      background: white;\\n    }\\n\\n    @media only screen and (max-width: 992px) {\\n      header, main, footer {\\n        padding-left: 0;\\n      }\\n    }\\n    header {\\n      position: fixed; /* Шапка фиксирована вверху */\\n      width: 100%;\\n      top: 0;\\n      left: 0;\\n      z-index: 1; /* Чтобы шапка всегда была сверху */\\n    }\\n    .sidenav {\\n      position: fixed; /* Боковая панель фиксирована */\\n      left: 0;\\n      width: 240px;\\n      height: 100%;\\n    }\\n\\n    .fab-tip {\\n      position: fixed;\\n      right: 85px;\\n      padding: 0px 0.5rem;\\n      text-align: right;\\n      background-color: #323232;\\n      border-radius: 2px;\\n      color: #FFF;\\n      width: auto;\\n    }\\n\\n    img {\\n      positi...    address: activityAddress,\\n            activity_time: activityEventTime,\\n            city: activityCity\\n        };\\n\\n        // Отправляем данные для обновления\\n        $.ajax({\\n            url: `/api/entertainments/${currentActivityId}`,\\n            type: \\'PUT\\',  // Метод запроса для обновления\\n            contentType: \\'application/json\\',\\n            data: JSON.stringify(requestData),\\n            success: function (response) {\\n                $(\\'#editModal\\').modal(\\'close\\');\\n                alert(\\'Активность обновлено успешно.\\');\\n                location.reload(); // Перезагружаем страницу после обновления\\n            },\\n            error: function (error) {\\n                console.error(\\'Ошибка при обновлении:\\', error);\\n                alert(\\'Ошибка при обновлении Активности.\\');\\n            }\\n        });\\n    });\\n    \\n    $(\\'#logoutLink\\').on(\\'click\\', function () {\\n      localStorage.removeItem(\\'auth_token\\'); \\n      localStorage.removeItem(\\'user_id\\');\\n      sessionStorage.removeItem(\\'auth_token\\');\\n      sessionStorage.removeItem(\\'user_id\\');\\n\\n      window.location.replace(\\'/\\');\\n    });\\n  });\\n</script>\\n\\n</body>\\n</html>' = <Response [200 OK]>.text","time":{"start":1772147232793,"stop":1772147233468,"duration":675}},{"uid":"58b783262b5406b2","status":"failed","statusDetails":"AssertionError: Ошибка регистрации (HTTP 400): {\"detail\":\"1 validation error for User\\nphone_number\\n  Value error, Номер телефона должен содержать 11 цифр и первая цифра -- 8 [type=value_error, input_value='79269409418', input_type=str]\\n    For further information visit https://errors.pydantic.dev/2.12/v/value_error\"}\nassert 400 == 200\n +  where 400 = <Response [400 Bad Request]>.status_code","time":{"start":1772146883473,"stop":1772146883503,"duration":30}}]},"tags":["asyncio"]},"source":"2da5396ee3c6f41a.json","parameterValues":[]}