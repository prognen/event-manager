{"uid":"74681cc12ef7d3b4","name":"test_full_event_management_scenario","fullName":"tests.e2e.test_mvp_event_flow_e2e.TestMVPEventManagementFlow#test_full_event_management_scenario","historyId":"e62c3c00690e83a3154aef7fb23391f5","time":{"start":1772205387077,"stop":1772205388482,"duration":1405},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1772205385178,"stop":1772205385237,"duration":59},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1772205385237,"stop":1772205385237,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1772205385237,"stop":1772205385237,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1772205385237,"stop":1772205385238,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1772205385237,"stop":1772205385237,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop_policy","time":{"start":1772205385238,"stop":1772205385238,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"faker_seed","time":{"start":1772205387075,"stop":1772205387075,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_event_loop","time":{"start":1772205387075,"stop":1772205387076,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1772205387075,"stop":1772205387077,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"passed","steps":[{"name":"Шаг 1: Регистрация нового пользователя","time":{"start":1772205387099,"stop":1772205387359,"duration":260},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Шаг 2: Аутентификация (прямой вход /api/login)","time":{"start":1772205387359,"stop":1772205387616,"duration":257},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверка токена после входа","time":{"start":1772205387616,"stop":1772205387616,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Шаг 3: Просмотр доступных площадок","time":{"start":1772205387616,"stop":1772205387650,"duration":34},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверка наличия площадок в системе","time":{"start":1772205387651,"stop":1772205387651,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Шаг 4: Просмотр активностей на площадках","time":{"start":1772205387651,"stop":1772205387743,"duration":92},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверка наличия активностей","time":{"start":1772205387743,"stop":1772205387743,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Шаг 5: Просмотр вариантов размещения","time":{"start":1772205387743,"stop":1772205387795,"duration":52},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверка наличия размещений","time":{"start":1772205387795,"stop":1772205387795,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Шаг 6: Просмотр доступных маршрутов (программ)","time":{"start":1772205387795,"stop":1772205387909,"duration":114},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверка наличия маршрутов","time":{"start":1772205387909,"stop":1772205387909,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Шаг 7: Создание мероприятия с маршрутом Москва → Воронеж","time":{"start":1772205387909,"stop":1772205388027,"duration":118},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверка ответа от /session/new","time":{"start":1772205388027,"stop":1772205388027,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Шаг 8: Проверка — мероприятие появилось в системе","time":{"start":1772205388027,"stop":1772205388197,"duration":170},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Шаг 9: Проверка — сессия появилась в системе","time":{"start":1772205388197,"stop":1772205388444,"duration":247},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Шаг 10: Просмотр профиля пользователя с активными мероприятиями","time":{"start":1772205388444,"stop":1772205388475,"duration":31},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Очистка: удаление тестового пользователя","time":{"start":1772205388475,"stop":1772205388481,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[{"name":"log","type":"text/plain","size":0},{"name":"stdout","type":"text/plain","size":0}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":17,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"event_loop::finalizer","time":{"start":1772205392619,"stop":1772205392619,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1772205392619,"stop":1772205392619,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_restore_policy","time":{"start":1772205392619,"stop":1772205392619,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1772205392619,"stop":1772205392619,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_event_loop::0","time":{"start":1772205392620,"stop":1772205392620,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"feature","value":"MVP: Управление мероприятиями"},{"name":"story","value":"Полный MVP-сценарий: регистрация → вход → создание мероприятия → просмотр"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.e2e"},{"name":"suite","value":"test_mvp_event_flow_e2e"},{"name":"subSuite","value":"TestMVPEventManagementFlow"},{"name":"host","value":"runnervmnay03"},{"name":"thread","value":"3197-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.e2e.test_mvp_event_flow_e2e"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":4,"broken":5,"skipped":0,"passed":4,"unknown":0,"total":13},"items":[{"uid":"a91354bbdebe6e9f","status":"passed","time":{"start":1772204726947,"stop":1772204728467,"duration":1520}},{"uid":"4d0a8863bd3286d6","status":"passed","time":{"start":1772204099250,"stop":1772204100708,"duration":1458}},{"uid":"8682ccbdc0036378","status":"passed","time":{"start":1772187257720,"stop":1772187259185,"duration":1465}},{"uid":"f94ff8091c744268","status":"broken","statusDetails":"httpx.ReadError","time":{"start":1772185841297,"stop":1772185842606,"duration":1309}},{"uid":"39ecd18676aa54ff","status":"broken","statusDetails":"httpx.ReadError","time":{"start":1772185299402,"stop":1772185300892,"duration":1490}},{"uid":"2934fb0abf18deb4","status":"broken","statusDetails":"httpx.ReadError","time":{"start":1772184760688,"stop":1772184762095,"duration":1407}},{"uid":"2716c82a5f478ac8","status":"broken","statusDetails":"httpx.ReadError","time":{"start":1772184381326,"stop":1772184382825,"duration":1499}},{"uid":"c20de400f2c1d32e","status":"failed","statusDetails":"AssertionError: Ошибка создания сессии (HTTP 500): {\"detail\":\"Ошибка при создании сессии: Мероприятие c таким ID уже существует.\"}\nassert 500 == 200\n +  where 500 = <Response [500 Internal Server Error]>.status_code","time":{"start":1772182314133,"stop":1772182315143,"duration":1010}},{"uid":"4833e4c61da53624","status":"broken","statusDetails":"httpx.ReadError","time":{"start":1772180877728,"stop":1772180878765,"duration":1037}},{"uid":"2da5396ee3c6f41a","status":"failed","statusDetails":"AssertionError: Ошибка создания сессии (HTTP 400): {\"detail\":\"Программа между площадками 1 и 2 не найдена\"}\nassert 400 == 200\n +  where 400 = <Response [400 Bad Request]>.status_code","time":{"start":1772147831318,"stop":1772147832220,"duration":902}},{"uid":"fdd0c8d29e20ab2d","status":"failed","statusDetails":"AssertionError: Активность 'Конференция' не найдена\nassert 'Конференция' in '\\ufeff<!DOCTYPE html>\\n<html lang=\"ru\">\\n<head>\\n  <meta charset=\"UTF-8\">\\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\\n  <title>Активности</title>\\n  <link href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" rel=\"stylesheet\">\\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css\">\\n  <style>\\n    header, main, footer {\\n      padding-left: 240px;\\n    }\\n\\n    body {\\n      background: white;\\n    }\\n\\n    @media only screen and (max-width: 992px) {\\n      header, main, footer {\\n        padding-left: 0;\\n      }\\n    }\\n    header {\\n      position: fixed; /* Шапка фиксирована вверху */\\n      width: 100%;\\n      top: 0;\\n      left: 0;\\n      z-index: 1; /* Чтобы шапка всегда была сверху */\\n    }\\n    .sidenav {\\n      position: fixed; /* Боковая панель фиксирована */\\n      left: 0;\\n      width: 240px;\\n      height: 100%;\\n    }\\n\\n    .fab-tip {\\n      position: fixed;\\n      right: 85px;\\n      padding: 0px 0.5rem;\\n      text-align: right;\\n      background-color: #323232;\\n      border-radius: 2px;\\n      color: #FFF;\\n      width: auto;\\n    }\\n\\n    img {\\n      positi...    address: activityAddress,\\n            activity_time: activityEventTime,\\n            city: activityCity\\n        };\\n\\n        // Отправляем данные для обновления\\n        $.ajax({\\n            url: `/api/entertainments/${currentActivityId}`,\\n            type: \\'PUT\\',  // Метод запроса для обновления\\n            contentType: \\'application/json\\',\\n            data: JSON.stringify(requestData),\\n            success: function (response) {\\n                $(\\'#editModal\\').modal(\\'close\\');\\n                alert(\\'Активность обновлено успешно.\\');\\n                location.reload(); // Перезагружаем страницу после обновления\\n            },\\n            error: function (error) {\\n                console.error(\\'Ошибка при обновлении:\\', error);\\n                alert(\\'Ошибка при обновлении Активности.\\');\\n            }\\n        });\\n    });\\n    \\n    $(\\'#logoutLink\\').on(\\'click\\', function () {\\n      localStorage.removeItem(\\'auth_token\\'); \\n      localStorage.removeItem(\\'user_id\\');\\n      sessionStorage.removeItem(\\'auth_token\\');\\n      sessionStorage.removeItem(\\'user_id\\');\\n\\n      window.location.replace(\\'/\\');\\n    });\\n  });\\n</script>\\n\\n</body>\\n</html>'\n +  where '\\ufeff<!DOCTYPE html>\\n<html lang=\"ru\">\\n<head>\\n  <meta charset=\"UTF-8\">\\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\\n  <title>Активности</title>\\n  <link href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" rel=\"stylesheet\">\\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css\">\\n  <style>\\n    header, main, footer {\\n      padding-left: 240px;\\n    }\\n\\n    body {\\n      background: white;\\n    }\\n\\n    @media only screen and (max-width: 992px) {\\n      header, main, footer {\\n        padding-left: 0;\\n      }\\n    }\\n    header {\\n      position: fixed; /* Шапка фиксирована вверху */\\n      width: 100%;\\n      top: 0;\\n      left: 0;\\n      z-index: 1; /* Чтобы шапка всегда была сверху */\\n    }\\n    .sidenav {\\n      position: fixed; /* Боковая панель фиксирована */\\n      left: 0;\\n      width: 240px;\\n      height: 100%;\\n    }\\n\\n    .fab-tip {\\n      position: fixed;\\n      right: 85px;\\n      padding: 0px 0.5rem;\\n      text-align: right;\\n      background-color: #323232;\\n      border-radius: 2px;\\n      color: #FFF;\\n      width: auto;\\n    }\\n\\n    img {\\n      positi...    address: activityAddress,\\n            activity_time: activityEventTime,\\n            city: activityCity\\n        };\\n\\n        // Отправляем данные для обновления\\n        $.ajax({\\n            url: `/api/entertainments/${currentActivityId}`,\\n            type: \\'PUT\\',  // Метод запроса для обновления\\n            contentType: \\'application/json\\',\\n            data: JSON.stringify(requestData),\\n            success: function (response) {\\n                $(\\'#editModal\\').modal(\\'close\\');\\n                alert(\\'Активность обновлено успешно.\\');\\n                location.reload(); // Перезагружаем страницу после обновления\\n            },\\n            error: function (error) {\\n                console.error(\\'Ошибка при обновлении:\\', error);\\n                alert(\\'Ошибка при обновлении Активности.\\');\\n            }\\n        });\\n    });\\n    \\n    $(\\'#logoutLink\\').on(\\'click\\', function () {\\n      localStorage.removeItem(\\'auth_token\\'); \\n      localStorage.removeItem(\\'user_id\\');\\n      sessionStorage.removeItem(\\'auth_token\\');\\n      sessionStorage.removeItem(\\'user_id\\');\\n\\n      window.location.replace(\\'/\\');\\n    });\\n  });\\n</script>\\n\\n</body>\\n</html>' = <Response [200 OK]>.text","time":{"start":1772147232793,"stop":1772147233468,"duration":675}},{"uid":"58b783262b5406b2","status":"failed","statusDetails":"AssertionError: Ошибка регистрации (HTTP 400): {\"detail\":\"1 validation error for User\\nphone_number\\n  Value error, Номер телефона должен содержать 11 цифр и первая цифра -- 8 [type=value_error, input_value='79269409418', input_type=str]\\n    For further information visit https://errors.pydantic.dev/2.12/v/value_error\"}\nassert 400 == 200\n +  where 400 = <Response [400 Bad Request]>.status_code","time":{"start":1772146883473,"stop":1772146883503,"duration":30}}]},"tags":["asyncio"]},"source":"74681cc12ef7d3b4.json","parameterValues":[]}